<ddap-header label="My Identity"
             [icon]="'identity'">
</ddap-header>

<ddap-main>
  <mat-accordion class="ddap-connected-accounts">
    <h2>Connected Accounts</h2>
    <mat-progress-bar *ngIf="connectedAccountsSubscription && !connectedAccountsSubscription.closed"
                      class="ddap-card-loader"
                      mode="indeterminate">
    </mat-progress-bar>
    <mat-expansion-panel *ngFor="let account of connectedAccounts">
      <mat-expansion-panel-header collapsedHeight="6rem"
                                  expandedHeight="6rem">
        <mat-card>
          <mat-card-header>
            <img mat-card-avatar
                 [src]="getPicture(account)"/>
            <mat-card-title>{{ getProvider(account) }}</mat-card-title>
            <mat-card-subtitle>{{ account.properties.subject }}</mat-card-subtitle>
          </mat-card-header>
        </mat-card>
      </mat-expansion-panel-header>
      <ddap-claim-group *ngIf="account.claims as ga4ghClaims"
                        [claimGroupLabel]="'Global Alliance for Genomics and Health Claims'"
                        [ga4ghClaims]="mapToGa4ghClaims(ga4ghClaims)">
      </ddap-claim-group>
      <button mat-button
              color="primary"
              class="uppercase"
              disabled>
        Disconnect
      </button>
    </mat-expansion-panel>
  </mat-accordion>

  <mat-accordion class="ddap-available-accounts">
    <h2>Connect Another Account</h2>
    <mat-progress-bar *ngIf="availableAccountsSubscription && !availableAccountsSubscription.closed"
                      class="ddap-card-loader"
                      mode="indeterminate">
    </mat-progress-bar>
    <a *ngFor="let account of availableAccounts"
       [href]="account.linkUrl">
      <mat-card>
        <mat-card-header>
          <img mat-card-avatar
               [src]="getPicture(account)"/>
          <mat-card-title [class.margin-bottom--0]="!isAccountPersona(account)">
            <span>{{ account.label }}</span>
          </mat-card-title>
          <mat-card-subtitle *ngIf="isAccountPersona(account)">
            {{ account.provider }}
          </mat-card-subtitle>
          <mat-icon class="icon icon-plus"></mat-icon>
        </mat-card-header>
      </mat-card>
    </a>
  </mat-accordion>
</ddap-main>
