<ddap-header [backLink]="['..']" [label]="entity?.dto.ui.label">
</ddap-header>

<ddap-main>
  <mat-progress-bar *ngIf="!entity"
                    class="ddap-card-loader"
                    mode="indeterminate">
  </mat-progress-bar>

  <div *ngIf="entity">
    <ddap-resource-form #resourceForm
                       [resource]="entity">
      <div class="ddap-personas-access">
        <h3>
          <mat-icon class="icon icon-access"></mat-icon>
          <span>Access</span>
        </h3>
        <ddap-persona-resource-access #accessForm
                                      [isNewResource]="false"
                                      [resource]="entity">
        </ddap-persona-resource-access>
      </div>
      <mat-error #formErrorElement
                 [class.visible]="formError.showError"
                 class="ddap-form-validation-msg">
        Please fix invalid fields (marked red) before saving the resource.
      </mat-error>
    </ddap-resource-form>
  </div>
</ddap-main>

<div class="ddap-form-toolbar">
  <button mat-flat-button
          (click)="delete()"
          [disabled]="!entity"
          data-se="btn-delete"
          type="button"
          color="warn"
          class="uppercase">
    Delete
  </button>

  <button mat-flat-button
          (click)="update()"
          [disabled]="!entity"
          data-se="btn-update"
          type="submit"
          color="primary"
          class="uppercase">
    Save
  </button>
</div>
