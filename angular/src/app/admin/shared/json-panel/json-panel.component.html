<mat-expansion-panel [expanded]="true">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <h3>Item</h3>
    </mat-panel-title>
  </mat-expansion-panel-header>
  <json-editor #entityEditor
               [options]="entityEditorOptions"
               [data]="entity?.dto"
               (change)="updateResourceDto($event)"></json-editor>

  <mat-panel-title *ngIf="useTests && state === ViewState.Editing"
                   class="ddap-test-title">
    <h3>Test</h3>
  </mat-panel-title>
  <json-editor [hidden]="!(useTests && state === ViewState.Editing)"
               #testEditor
               [options]="testEditorOptions"
               [data]="testDto"
               (change)="updateTestDto($event)"></json-editor>

  <mat-error *ngIf="error">
    <span *ngIf="!error.modification">{{ error }}</span>
    <span *ngIf="error.modification">Cannot save, please consider using following dtos:</span>
  </mat-error>

  <json-editor *ngIf="error && error.modification && useTests && state === ViewState.Editing"
               #errorEditor
               [options]="errorEditorOptions"
               [data]="error"></json-editor>

  <mat-action-row *ngIf="state !== ViewState.Viewing">
    <button mat-flat-button
            color="primary"
            (click)="save()"
            [disabled]="state === ViewState.Submitting">Submit
    </button>
    <button mat-flat-button
            (click)="cancel()"
            [disabled]="state === ViewState.Submitting">Cancel
    </button>
  </mat-action-row>
  <mat-action-row *ngIf="state === ViewState.Viewing">
    <button mat-flat-button
            color="primary"
            (click)="edit()">Edit
    </button>
    <button id="remove-btn"
            mat-flat-button
            color="warn"
            (click)="remove()"
            [disabled]="state === ViewState.Submitting">Remove
    </button>
  </mat-action-row>
</mat-expansion-panel>
