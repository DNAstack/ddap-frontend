<h2>
  <mat-icon mat-list-icon>insert_drive_file</mat-icon>
  {{ resource?.ui.displayAs }}</h2>

<p>{{ resource?.ui.desc }}</p>

<mat-expansion-panel [expanded]="true">
  <mat-expansion-panel-header>
    <mat-panel-title>
      {{ resource?.ui.displayAs }} JSON
    </mat-panel-title>
  </mat-expansion-panel-header>
  <json-editor [options]="editorOptions"
               [data]="resource"
               (change)="updateResourceDto($event)"></json-editor>

  <mat-error *ngIf="error">{{ error }}</mat-error>

  <mat-action-row *ngIf="isStateView()">
    <button mat-flat-button
            color="primary"
            (click)="save()"
            [disabled]="isStateSubmit()">Submit
    </button>

    <button mat-flat-button
            (click)="cancel()"
            [disabled]="isStateSubmit()">Cancel
    </button>
  </mat-action-row>
  <mat-action-row *ngIf="!isStateView()">
    <button mat-flat-button
            color="primary"
            (click)="edit()">Edit
    </button>
  </mat-action-row>
</mat-expansion-panel>

<mat-list>
  <h3 mat-subheader>Views</h3>
  <mat-list-item *ngFor="let view of views">
    <mat-icon mat-list-icon>view_quilt</mat-icon>
    <h4 mat-line>{{ view.name }}</h4>

    <mat-form-field *ngIf="resource.views[view.name].token"
                    mat-line
                    class="example-form-field">
      <input matInput
             disabled
             type="text"
             placeholder="Access Token"
             [(ngModel)]="resource.views[view.name].token">

      <button mat-mat-flat-button
              matSuffix
              mat-icon-button
              ngxClipboard
              [cbContent]="resource.views[view.name].token"
              aria-label="Copy to clipboard">
        <mat-icon>file_copy</mat-icon>
      </button>
    </mat-form-field>

    <button *ngIf="!resource.views[view.name].url && !resource.views[view.name].token"
            mat-flat-button
            color="primary"
            (click)="getAccess(view.name)">Get Access
    </button>

    <a *ngIf="resource.views[view.name].url"
       mat-raised-button
       color="accent"
       href="{{resource.views[view.name].url}}">Access</a>

    <mat-divider></mat-divider>
  </mat-list-item>
</mat-list>
