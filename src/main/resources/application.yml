server:
  port: 8085

dam:
  base-url: https://dam-dot-craigv-codelab.appspot.com/
  client-id: b1aed96d-6367-4313-87a1-65eda4962a76
  client-secret: 7e9c26f5-e92f-4e8f-ba47-035b8b9f4b66
idp:
  base-url: http://localhost:3001/
  client-id: local-dam-client-id
  client-secret: local-dam-client-secret

ddap:
  public-uri: http://localhost:8085
  cors:
    origins: "http://localhost:4200"

spring:
  security:
    user:
      name: "dev"
      password: "dev"
  cloud:
    gateway:
      routes:
        # NB: If you add a new route here,
        # you may also need to modify com.dnastack.ddapfrontend.route.Router#angluarRoutes
        - predicates:
            - Path=/api/cafevariome/**
          filters:
            - StripPrefix=2
            - Logging
          uri: https://beacon.cafevariome.org
        - predicates:
            - Path=/dam/v1alpha/**
          filters:
            - AddRequestParameter=clientId,${dam.client-id}
            - AddRequestParameter=clientSecret,${dam.client-secret}
            - SetBearerTokenFromCookie
            - StripPrefix=2
            - PrependPath=/dam/v1alpha/dnastack
            - Logging
          uri: ${dam.base-url}
        - predicates:
            - Path=/identity/v1alpha/passport
          filters:
            - AddRequestParameter=clientId,${idp.client-id}
            - AddRequestParameter=clientSecret,${idp.client-secret}
            - StripPrefix=2
            - PrependPath=/identity/v1alpha/dnastack
            - Logging
          uri: ${idp.base-url}
        - predicates:
            - Path=/identity/v1alpha/**
          filters:
            - AddRequestParameter=clientId,${idp.client-id}
            - AddRequestParameter=clientSecret,${idp.client-secret}
            - StripPrefix=2
            - PrependPath=/identity/v1alpha/dnastack
            - Logging
          uri: ${idp.base-url}
